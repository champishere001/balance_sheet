<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Place Image Manager</title>

<style>
body{font-family:Arial;background:#0b0f1a;color:#fff;padding:16px;margin:0}
.card{background:#141b2d;border-radius:12px;padding:15px;margin-bottom:12px}
select,input,button{width:100%;padding:10px;border-radius:8px;border:none;margin-top:6px}
select,input{background:#0b1022;color:white;border:1px solid rgba(255,255,255,.2)}
button{background:#2f7cff;color:white;font-weight:bold;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}
.drop{border:1px dashed rgba(255,255,255,.3);padding:10px;border-radius:10px;cursor:pointer}
img{width:100%;height:160px;object-fit:cover;border-radius:10px;margin-top:8px}
</style>

<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-storage-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-database-compat.js"></script>
</head>

<body>

<h2>ðŸ“¸ Place Image Manager</h2>

<div class="card">

<label>Select Place</label>
<select id="placeId" onchange="loadExisting()"></select>

<button onclick="saveAll()">Save All</button>

<div id="msg"></div>

</div>

<div class="grid">

<div>
<div class="drop" data-slot="1">Drop image slot 1</div>
<input id="u1">
<img id="p1" style="display:none">
</div>

<div>
<div class="drop" data-slot="2">Drop image slot 2</div>
<input id="u2">
<img id="p2" style="display:none">
</div>

<div>
<div class="drop" data-slot="3">Drop image slot 3</div>
<input id="u3">
<img id="p3" style="display:none">
</div>

<div>
<div class="drop" data-slot="4">Drop image slot 4</div>
<input id="u4">
<img id="p4" style="display:none">
</div>

</div>

<script>

/* FIREBASE */
firebase.initializeApp({
apiKey:"AIzaSyBmJDsXvokR8kYs_yoLPau1DqANPBBORJY",
authDomain:"garg-enterprise.firebaseapp.com",
databaseURL:"https://garg-enterprise-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"garg-enterprise",
storageBucket:"garg-enterprise.firebasestorage.app",
messagingSenderId:"1097408452571",
appId:"1:1097408452571:web:4e6806326b47ebb0b5b9fe"
});

const db=firebase.database();
const storage=firebase.storage();
firebase.auth().signInAnonymously();

/* YOUR FULL PLACE LIST */
const PLACE_IDS = [
"bilaspur-food-street","bilaspur-town","ghumarwin","gobind-sagar-lake",
"markandeya-temple","naina-devi-temple","sariun-fort-ruins",
"shri-kotkahlur-fort-area","vyas-cave","bhakra-lake-boating-point",
"bhakra-nangal-dam-viewpoints","koldam-dam","chamba-town","dalhousie",
"khajjiar","bharmour","chaurasi-temple-complex","manimahesh-lake",
"bhuri-singh-museum","lakshmi-narayan-temple","chamera-lake",
"dainkund-peak","ganji-pahari","st-francis-church","pangi-valley",
"awah-devi-temple","deotsidh-temple","hamirpur-town","nadaun",
"bhagsu-waterfall","bir-billing","dharamshala","triund-trek",
"mcleod-ganj","kangra-fort","palampur","manali","kasol","kullu",
"kaza","shimla","delhi","chandigarh"
];

/* POPULATE DROPDOWN */
const sel=document.getElementById("placeId");
PLACE_IDS.forEach(p=>{
const o=document.createElement("option");
o.value=p;
o.textContent=p;
sel.appendChild(o);
});

/* LOAD EXISTING */
async function loadExisting(){

const p=placeId.value;
const snap=await db.ref("place_images/"+p).once("value");
const d=snap.val()||{};

for(let i=1;i<=4;i++){

document.getElementById("u"+i).value=d[i]?.url||"";

if(d[i]?.url){
const img=document.getElementById("p"+i);
img.src=d[i].url;
img.style.display="block";
}else{
document.getElementById("p"+i).style.display="none";
}

}

}

/* SAVE */
async function saveAll(){

const p=placeId.value;
const data={};

for(let i=1;i<=4;i++){
const v=document.getElementById("u"+i).value.trim();
if(v)data[i]={url:v};
}

await db.ref("place_images/"+p).set(data);

msg("Saved "+p);

}

/* DROP UPLOAD */
document.querySelectorAll(".drop").forEach(d=>{

d.addEventListener("dragover",e=>{e.preventDefault()});

d.addEventListener("drop",async e=>{

e.preventDefault();

const slot=d.dataset.slot;
const file=e.dataTransfer.files[0];
const place=placeId.value;

const ref=storage.ref(`places/${place}/${slot}.jpg`);

await ref.put(file);

const url=await ref.getDownloadURL();

document.getElementById("u"+slot).value=url;

const img=document.getElementById("p"+slot);
img.src=url;
img.style.display="block";

msg("Uploaded slot "+slot);

});

});

function msg(t){document.getElementById("msg").innerText=t}

/* AUTO LOAD FIRST */
loadExisting();

</script>

</body>
</html>
